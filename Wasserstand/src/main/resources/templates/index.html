<html>
	<head>
		<title>Wasserwacht Wasserstand</title>
		<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="style.css" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>
	<body onload="drawgraph()">
		<div class="navbar">
			&nbsp;
		</div>
		<div class="container">
			<div class="upper show">
				<a th:text="${wasserstand}" id="value"></a><a id="textbig">cm</a>
			</div>
			<div class="lower show">
				<a id="textsmall">Wasserstand</a><br/>
				<a id="timestamp">Letztes Update:</a>
				<a id="timestamp" th:text="${timestamp}"></a>
			</div>
		</div>
		<div id="graphcon">
			<canvas id="graph">
			</canvas>
		</div>
		
		
		<script th:inline="javascript">
			function drawgraph(){
				debugger;
				/*<![CDATA[*/
					
					var data = /*[[${data}]]*/ [];
					var canvas = document.getElementById('graph');
					var context = canvas.getContext('2d');
					var distance = 10;
					var maxheight = 150;
					var barwidth= 300 /data.length - distance;
					
					for(var i = 0; i < data.length; i++)
					{
						context.fillRect(barwidth * i + distance * i, maxheight - maxheight * data[i].wasserstand / 100, barwidth, maxheight * data[i].wasserstand / 100);
					}
					
				/*]]>*/
			}
		</script>
	</body>
</html>