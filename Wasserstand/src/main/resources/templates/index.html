<html>
	<head>
		<title>Wasserwacht Wasserstand</title>
		<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="style.css" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://cdn.anychart.com/releases/8.0.0/js/anychart-base.min.js"></script>
	</head>
	<body onload="drawgraph()">
		<div class="navbar">
			<ul>
				<li>
					<div onclick="movewindows('graphcon')">
						<a>Graph</a>
					</div>
				</li>
				<li>
					<div onclick="movewindows('anzeigecon')">
						<a>Anzeige</a>
					</div>
				</li>
			</ul>
		</div>
		<div class="container" id="anzeigecon">
			<div class="upper show">
				<a th:text="${wasserstand}" id="value"></a><a id="textbig">cm</a>
			</div>
			<div class="lower show">
				<a id="textsmall">Wasserstand</a><br/>
				<a id="timestamp">Letztes Update:</a>
				<a id="timestamp" th:text="${timestamp}"></a>
			</div>
		</div>
		<div class="container" id="graphcon">
			
		</div>
		
		
		<script th:inline="javascript">
			anychart.onDocumentReady(function () {
				/*<![CDATA[*/
					
					var dbdata = /*[[${data}]]*/ [];
					
					var entries = [];
					var entry = [];
					
					dbdata.forEach(function(item){
						entry = [];
						
						var date = item.hour + ":" + item.min;
						
						entry.push(date);
						entry.push(item.wasserstand);
						
						entries.push(entry);
					})
					
					debugger;
					
					var chart = anychart.area();
					
					var series = chart.area(entries);
					
					chart.container("graphcon");
					
					chart.draw();
					
					
				/*]]>*/
			)};
			
			function movewindows(div){
				
				var centered = document.getElementById(div);
				var containers = document.getElementsByClassName('container');
				
				Array.from(containers).forEach(function(item){
					item.style.display="none";
				});
				centered.style.display = "block";
				
			};

		</script>
	</body>
</html>