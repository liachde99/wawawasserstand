<html>
	<head>
		<title>Wasserwacht Wasserstand</title>
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
	<body>
		<div class="navbar">
			&nbsp;
		</div>
		<div class="container">
			<div class="upper show" th:onclick="'drawgraph('+${tag}+')'">
				<a th:text="${wasserstand}" id="value"></a>
				<div style="position: absolute; bottom: 310; right: 50;"><a id="textbig">cm</a></div>
			</div>
			<div class="lower show">
				<a id="textsmall">Wasserstand</a><br/><br/><br/><br/><br/>
				<a id="timestamp" th:text="'Letztes Update: ' + ${lasttimestamp}"></a>
			</div>
		</div>
		<canvas id="graph">
		</canvas>
		
		<script type="text/javascript">
			function drawgraph(aWasserstand){
				debugger;
				var len = aWasserstand.length;
				
				var canvas = document.getElementById('graph');
				var graph = canvas.getContext('2d');
				
				var wid = canvas.offsetWidth;
				var hei = canvas.offsetHeight;
				
				var schritt = wid / ( len + 1 );
				
				graph.fillStyle = '#0f0';
				graph.beginPath();
				graph.moveTo(0, hei);
				for(i = 0; i < len; i++){
					graph.lineTo(schritt*i, aWasserstand[i].stand);
				}
				graph.lineTo(wid, hei);
				graph.closePath();
				graph.fill();
			}
		</script>
	</body>
</html>